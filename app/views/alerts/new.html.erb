<% form_for @alert do |f|%>
  <%= f.label :title %>
  <%= f.text_field :title %>
  <%= f.label :message %>
  <%= f.text_field :message %>
  
  <%= f.label :status %>
  <%= f.select :status, Alert::Statuses %>

  <%= f.label :severity %>
  <%= f.select :severity, Alert::Severities %>

  <%= f.label :acknowledge, "Requires acknowledgement" %>
  <%= f.check_box :acknowledge %>
  
  <fieldset>
    <legend>Communication Methods</legend>
    <% Device::Types.each do |type| %>
      <%= check_box_tag 'alert[device_types][]', type, nil, :id => "alert_#{dom_class(type)}" %>
      <%= label_tag "alert_#{dom_class(type)}", type.display_name %>
    <% end %>
  </fieldset>
  
  <fieldset>
    <legend>Jurisdictions</legend>
    <%= f.select :jurisdiction_ids, Jurisdiction.all.map{|m| [m.name, m.id]}, {}, :multiple => :multiple, :class => 'crossSelect' %>
  </fieldset>

  <fieldset>
    <legend>Limit to Certain Roles</legend>
    <%= f.select :role_ids, Role.all.map{|m| [m.name, m.id]}, {}, :multiple => :multiple, :class => 'crossSelect' %>
  </fieldset>
  
  <fieldset>
    <legend>Limit to Certain Organizations</legend>
    <%= f.select :organization_ids, Organization.all.map{|m| [m.name, m.id]}, {}, :multiple => :multiple, :class => 'crossSelect' %>
  </fieldset>
  
  <fieldset>
    <legend>People</legend>
    <%= hidden_field_tag 'alert[user_ids][]', nil, :id => :alert_user_id %>
    <%= f.select :user_ids, [], {}, :multiple => :multiple %>
  </fieldset>
  
  <%= f.submit "Preview Message" %>
  
<% end %>